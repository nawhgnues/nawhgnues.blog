---
title: "Next.js ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã« ESLintã¨Prettierã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"
date: 2025-01-25
desc: ä¸€è²«æ€§ã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ããŸã‚ã«ã€ESLint ã¨ Prettier ã‚’è¨­å®šã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
thumbnail: /posts/blog/eslint-prettier/thumbnail.png
tags: ["eslint", "prettier"]
locale: ja
---

### Todo

ä¸€è²«æ€§ã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ããŸã‚ã«ã€ESLintã¨Prettierã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

### ESLintã¨ã¯?

JavaScript ã®æ§‹æ–‡ã‚„è¨­å®šã•ã‚ŒãŸã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ã‚¿ã‚¤ãƒ«ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã€ãã‚Œã‚’è¡¨ç¤ºã—ã¦ãã‚Œã‚‹ Linter ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã‚’æ•æ‰ã—ãŸã‚Šã€å…¨ä½“çš„ãªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ã‚¿ã‚¤ãƒ«ã‚’æ±ºã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ãŸã‚ã€ã‚³ãƒ¼ãƒ‰ã®ä¸€è²«æ€§ã‚„å“è³ªã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

> Lint ã¨ã¯ï¼Ÿ: ã‚¨ãƒ©ãƒ¼ã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã«ãƒãƒ¼ã‚¯ã‚’ä»˜ã‘ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚

### ESLint ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ–¹æ³•

ã“ã®è¨˜äº‹ã§ã¯ Next.js (v15) ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’åŸºã«è¨­å®šã—ã¾ã™ã€‚

**1. Next.js ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ**

![Yes ã‚’é¸æŠã—ã¾ã™](/posts/blog/eslint-prettier/setup.png)

```bash
// pnpm ã‚’ä½¿ç”¨ã—ã¦ Next.js ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pnpm create-next-app
```

ä¸Šè¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ESLint ã‚’ä½¿ç”¨ã™ã‚‹ã‹ã©ã†ã‹ã‚’å°‹ã­ã‚‰ã‚Œã¾ã™ã€‚Yes ã‚’é¸æŠã™ã‚‹ã¨ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã«ä»¥ä¸‹ã®ã‚ˆã†ãª eslint.config.mjs ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚

> âš ï¸ ESLint v9 ã‹ã‚‰ .eslintrc ã¯éæ¨å¥¨ã¨ãªã‚Šã€eslint.config.(js | mjs | cjs) ã§ flat config å½¢å¼ã‚’ä½¿ç”¨ã—ã¦è¨­å®šã™ã‚‹ã“ã¨ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚

```js
// eslint.config.mjs

import { dirname } from "path";
import { fileURLToPath } from "url";
import { FlatCompat } from "@eslint/eslintrc";

const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);

const compat = new FlatCompat({
  baseDirectory: __dirname,
});

const eslintConfig = [
  ...compat.extends("next/core-web-vitals", "next/typescript"),
];

export default eslintConfig;
```

**2. ESLint è¨­å®š**

ESLint ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æä¾›ã•ã‚Œã¦ã„ã‚‹ `no-duplicate-imports` è¨­å®šã¨ `eslint-plugin-unused-imports`ã€`eslint-plugin-tailwindcss`ã€`eslint-config-prettier` ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦è¨­å®šã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

> ğŸ› ï¸ ä½¿ç”¨ã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ä¸€è¦§
>
> - eslint-plugin-unused-imports: ä½¿ç”¨ã—ãªã„ import ã‚„å¤‰æ•°ã‚’æ¤œå‡ºã—ã€å‰Šé™¤ã‚’æ”¯æ´ã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³
> - eslint-plugin-tailwindcss: TailwindCSS ä½¿ç”¨æ™‚ã«ä¸€è²«æ€§ã®ã‚ã‚‹ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã‚’æ”¯æ´ã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³
> - eslint-config-prettier: ESLint ã¨ Prettier ã®è¡çªã‚’é˜²ãã€Prettier ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ä»»ã›ã‚‹ã‚ˆã†ã« ESLint ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé–¢é€£ã®ãƒ«ãƒ¼ãƒ«ã‚’ç„¡åŠ¹åŒ–ã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³

**1) ESLint ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**

```bash
pnpm add -D eslint-plugin-unused-imports eslint-plugin-tailwindcss eslint-config-prettier
```

**2) eslint.config.mjsã®ä¿®æ­£**

```js
import { dirname } from "path";
import { fileURLToPath } from "url";
import { FlatCompat } from "@eslint/eslintrc";

// ä½¿ç”¨ã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import eslintConfigUnusedImports from "eslint-plugin-unused-imports";
import eslintConfigTailwindcss from "eslint-plugin-tailwindcss";
import eslintConfigPrettier from "eslint-config-prettier";

const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);

const compat = new FlatCompat({
  baseDirectory: __dirname,
});

const eslintConfig = [
  // ESLint ã‚’é©ç”¨ã—ãªã„ãƒ•ã‚¡ã‚¤ãƒ«è¨­å®š
  {
    ignores: [".next", "node_modules", "out"],
  },

  ...compat.extends("next/core-web-vitals", "next/typescript"),

  // ESLint ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ«ãƒ¼ãƒ«ã‚’ä¿®æ­£
  {
    rules: {
      "no-duplicate-imports": ["error"],
    },
  },

  // eslint-plugin-unused-imports è¨­å®š
  {
    // ESLint ã‚’é©ç”¨ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«è¨­å®š
    files: ["src/**/*.{js,jsx,ts,tsx}"],

    // ä»»æ„ã®å€¤ã§ã‚ã‚‹ unused-importsã¨ã€å‰è¿°ã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ãŸ Configã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆeslintConfigUnusedImportsã‚’ãƒãƒƒãƒ”ãƒ³ã‚°ã—ã¾ã™ã€‚
    plugins: {
      "unused-imports": eslintConfigUnusedImports,
    },

    rules: {
      "@typescript-eslint/no-unused-vars": "off",
      "unused-imports/no-unused-imports": "error",
      "unused-imports/no-unused-vars": [
        "warn",
        {
          vars: "all",
          varsIgnorePattern: "^_",
          args: "after-used",
          argsIgnorePattern: "^_",
        },
      ],
    },
  },

  // eslint-plugin-tailwindcss è¨­å®š
  {
    files: ["src/**/*.{js,jsx,ts,tsx}"],

    // ä»»æ„ã®å€¤ã§ã‚ã‚‹ tailwindcssã¨ã€å‰è¿°ã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ãŸ Configã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆeslintConfigTailwindcssã‚’ãƒãƒƒãƒ”ãƒ³ã‚°ã—ã¾ã™ã€‚
    plugins: {
      tailwindcss: eslintConfigTailwindcss,
    },

    rules: {
      "tailwindcss/classnames-order": "warn",
      "tailwindcss/enforces-shorthand": "warn",
    },
  },

  // eslint-config-prettier è¨­å®š
  eslintConfigPrettier,
];

export default eslintConfig;


// âœ… å‚™è€ƒ
// ãƒ—ãƒ©ã‚°ã‚¤ãƒ³åŒºåˆ†ã—ãªãä¸€ã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ä½œæˆã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã€‚
  plugins: {
    "unused-imports": eslintConfigUnusedImports,
    tailwindcss: eslintConfigTailwindcss,
  },

  rules: {
    // eslint-plugin-unused-imports
    "@typescript-eslint/no-unused-vars": "off",
    "unused-imports/no-unused-imports": "error",
    "unused-imports/no-unused-vars": [
      "warn",
      {
        vars: "all",
        varsIgnorePattern: "^_",
        args: "after-used",
        argsIgnorePattern: "^_",
      },
    ],

    // eslint-plugin-tailwindcss
    "tailwindcss/classnames-order": "warn",
    "tailwindcss/enforces-shorthand": "warn",
  },

```

> è¨­å®šå‚è€ƒ
> https://www.npmjs.com/package/eslint-plugin-unused-imports https://www.npmjs.com/package/eslint-config-prettier

---

### Prettierã¨ã¯?

ã‚³ãƒ¼ãƒ‰ã‚’ç¶ºéº—ãªå½¢ã«ã—ã¦ãã‚Œã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒ†ã‚£ãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚.

### Prettier ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ–¹æ³•

ã“ã®è¨˜äº‹ã§ã¯ ESM ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’åŸºã«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚

**1. Prettier.config.mjs ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ**

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã« Prettier.config.mjs ã‚’ä½œæˆã—ã¾ã™ã€‚

**2. Prettier.config.mjs ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿®æ­£**

```js
const config = {
  // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€é…åˆ—ã€é–¢æ•°ãªã©ã« ',' ã‚’è¿½åŠ 
  trailingComma: "all",
  // ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆå¹…
  tabWidth: 2,
  // ã‚»ãƒŸã‚³ãƒ­ãƒ³ã‚’è¿½åŠ 
  semi: true,
  // ã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã‚’ä½¿ç”¨
  singleQuote: true,
  // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­æ‹¬å¼§å†…ã«ã‚¹ãƒšãƒ¼ã‚¹ã‚’è¿½åŠ 
  bracketSpacing: true,
  ...
};

export default config;
```

**3. .prettierignoreãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ**

Prettier ã‚’é©ç”¨ã—ãŸããªã„ãƒ•ã‚¡ã‚¤ãƒ«ã¯ .prettierignore ãƒ•ã‚¡ã‚¤ãƒ«å†…ã«æ˜è¨˜ã—ã¾ã™ã€‚

```js
# next.js
/.next/
/out/

# production
/build

# lock files
pnpm-lock.yaml

# node_modules
/node_modules
...
```

> å‚è€ƒ
> https://prettier.io/docs/en/options.html

---

### vscodeè¨­å®š

**1. vscodeæ‹¡å¼µæ©Ÿèƒ½ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**

vscode ã®æ‹¡å¼µæ©Ÿèƒ½ã§ ESLint ã¨ Prettier-Code Formatter ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

**2. settings.json ä¿®æ­£**

ã‚³ãƒ¼ãƒ‰ä¿å­˜æ™‚ã« ESLintã¨PrettierãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ã€vscodeã®settings.jsonãƒ•ã‚¡ã‚¤ãƒ«ã«ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```json
//settings.json

// formatter
"editor.defaultFormatter": "esbenp.prettier-vscode",
"editor.formatOnSave": true,

// lint
"editor.codeActionsOnSave": {
  "source.fixAll.eslint": "explicit"
},
```
